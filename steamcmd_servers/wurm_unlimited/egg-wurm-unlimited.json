{
    "_comment": "DO NOT EDIT: FILE GENERATED AUTOMATICALLY BY PTERODACTYL PANEL - PTERODACTYL.IO",
    "meta": {
        "version": "PTDL_v1"
    },
    "exported_at": "2019-12-28T14:25:19-06:00",
    "name": "Wurm Unlimited",
    "author": "iamtehguy@gmail.com",
    "description": "WU Headless",
    "image": "quay.io\/parkervcp\/pterodactyl-images:debian_openjdk-8-jre",
    "startup": "{{SERVER_EXEC}} ip=0.0.0.0 externalport={{SERVER_PORT}} start={{SERVER_WORLD}} maxplayers={{SERVER_MAX_PLAYERS}} servername={{SERVER_NAME}} adminpwd={{SERVER_ADMIN_PWD}} serverpassword={{SERVER_PASSWORD}}",
    "config": {
        "files": "{\r\n    \"LaunchConfig.ini\": {\r\n        \"parser\": \"properties\",\r\n        \"find\": {\r\n            \"MaxHeapSize\": \"{{server.build.env.SERVER_MEMORY}}m\",\r\n            \"CleanLogsOnStart\": \"{{server.build.env.SERVER_CLEAN_LOGS_ON_START}}\"\r\n        }\r\n    }\r\n}",
        "startup": "{\r\n    \"done\": \"Wurm Server launcher finished at\",\r\n    \"userInteraction\": []\r\n}",
        "logs": "{\r\n    \"custom\": true,\r\n    \"location\": \"logs\/latest.log\"\r\n}",
        "stop": "shutdown"
    },
    "scripts": {
        "installation": {
            "script": "#!\/bin\/bash\r\n#\r\n# Installation script for Wurm Unlimited\r\n#\r\n# Server Files: \/mnt\/server\r\napt -y update\r\napt -y upgrade\r\napt -y --no-install-recommends install curl ca-certificates\r\n\r\n# Headless setup as per https:\/\/www.wurmpedia.com\/index.php\/Server_administration_(Wurm_Unlimited)#Linux_Headless\r\napt -y install libswt-gtk3-java xvfb x11vnc\r\n\r\nXvfb :99 &\r\nexport DISPLAY=:99\r\n\r\n## Installing Wurm Unlimited Dedicated Server\r\n\r\n# Download and set up SteamCMD as per https:\/\/developer.valvesoftware.com\/wiki\/SteamCMD#Linux\r\nadd-apt-repository multiverse\r\ndpkg --add-architecture i386\r\napt -y update\r\napt -y install lib32gcc1\r\n\r\ncd \/tmp\r\ncurl -sSL -o steamcmd.tar.gz http:\/\/media.steampowered.com\/installer\/steamcmd_linux.tar.gz\r\n\r\nmkdir -p \/mnt\/server\/steamcmd\r\ntar -xzvf steamcmd.tar.gz -C \/mnt\/server\/steamcmd\r\ncd \/mnt\/server\/steamcmd\r\n\r\nchown -R root:root \/mnt\r\n\r\n# Installing Wurm Unlimited\r\nexport HOME=\/mnt\/server\r\n.\/steamcmd.sh +login anonymous +force_install_dir \/mnt\/server +app_update 402370 validate +quit\r\n\r\n# Copying steamclient.so as per https:\/\/www.wurmpedia.com\/index.php\/Server_administration_(Wurm_Unlimited)#Headless\r\nmkdir -p \/mnt\/server\/nativelibs\r\ncp -v linux64\/steamclient.so \/mnt\/server\/nativelibs\r\n\r\n## Installing the Mod Launcher\r\n\r\n# Checking if ML is wanted\r\nif [ ! -z \"$SERVER_MODLOADER_VERSION\" ]; then\r\n    apt install -y --no-install-recommends unzip\r\n    \r\n    # Grabbing latest Mod Launcher tag, if desired\r\n    #if [ \"$SERVER_MODLOADER_VERSION\" == \"latest\"]; then\r\n    #    SERVER_MODLOADER_VERSION=$(curl -L -s -H 'Accept: application\/json' https:\/\/github.com\/ago1024\/WurmServerModLauncher\/releases\/latest | sed -e 's\/.*\"tag_name\":\"\\([^\"]*\\)\".*\/\\1\/' | sed -e 's\/[^0-9,\\.]*\/\/g')\r\n    #fi\r\n    \r\n    # Downloading the Mod Launcher\r\n    cd \/tmp\r\n    curl -sSL -o server-modlauncher.zip https:\/\/github.com\/ago1024\/WurmServerModLauncher\/releases\/download\/v${SERVER_MODLOADER_VERSION}\/server-modlauncher-${SERVER_MODLOADER_VERSION}.zip\r\n    unzip server-modlauncher.zip -d \/mnt\/server\r\n    \r\n    # Installing the launcher\r\n    cd \/mnt\/server\r\n    chmod +x patcher.sh\r\n    sh .\/patcher.sh\r\nfi",
            "container": "ubuntu:18.10",
            "entrypoint": "bash"
        }
    },
    "variables": [
        {
            "name": "Server Executable",
            "description": "Executable used to launch the server. If using the Mod Launcher, set this to \".\/WurmServerLauncer-patched\"",
            "env_variable": "SERVER_EXEC",
            "default_value": ".\/WurmServerLauncher",
            "user_viewable": 1,
            "user_editable": 1,
            "rules": "required|string|max:64"
        },
        {
            "name": "World",
            "description": "World to use when launching Wurm. The defaults provided are Creative and Adventure (case sensitive)",
            "env_variable": "SERVER_WORLD",
            "default_value": "dist\/Adventure",
            "user_viewable": 1,
            "user_editable": 1,
            "rules": "required|string|max:512"
        },
        {
            "name": "Max Players",
            "description": "Maximum amount of people allowed to join the server",
            "env_variable": "SERVER_MAX_PLAYERS",
            "default_value": "32",
            "user_viewable": 1,
            "user_editable": 1,
            "rules": "integer|max:128"
        },
        {
            "name": "Mod Loader Version",
            "description": "Version of the mod loader to download. To disable this use \"none\". You can see all version numbers here: https:\/\/github.com\/ago1024\/WurmServerModLauncher\/releases\/",
            "env_variable": "SERVER_MODLOADER_VERSION",
            "default_value": "none",
            "user_viewable": 1,
            "user_editable": 1,
            "rules": "string|max:20"
        },
        {
            "name": "Admin Password",
            "description": "Unlocks the admin commands from within the game, that can be used to change the gameplay settings of the server, such as skill gain rate and field growth time\r\n\r\nSet to \"\" for no password",
            "env_variable": "SERVER_ADMIN_PWD",
            "default_value": "\"\"",
            "user_viewable": 1,
            "user_editable": 0,
            "rules": "string|max:128"
        },
        {
            "name": "Server Name",
            "description": "The name of the server that will be visible in server browsers. If the name contains spaces, surround it with \"\". For example servername=\"my private server\"",
            "env_variable": "SERVER_NAME",
            "default_value": "Server",
            "user_viewable": 1,
            "user_editable": 1,
            "rules": "required|string|max:512"
        },
        {
            "name": "Clean Logs on Start",
            "description": "Clear the logfile on server start",
            "env_variable": "SERVER_CLEAN_LOGS_ON_START",
            "default_value": "true",
            "user_viewable": 1,
            "user_editable": 1,
            "rules": "required|string|max:5"
        },
        {
            "name": "Server Password",
            "description": "Sets the password that is used when trying to connect to the server\r\n\r\nSet to \"\" for no password",
            "env_variable": "SERVER_PASSWORD",
            "default_value": "\"\"",
            "user_viewable": 1,
            "user_editable": 1,
            "rules": "string|max:128"
        }
    ]
}