{
    "_comment": "DO NOT EDIT: FILE GENERATED AUTOMATICALLY BY PTERODACTYL PANEL - PTERODACTYL.IO",
    "meta": {
        "version": "PTDL_v1",
        "update_url": null
    },
    "exported_at": "2022-11-1T21:14:30+01:00",
    "name": "7 Days To Die",
    "author": "kano@wapriaily.com",
    "description": "\u300A7 Days To Die\u300B\u662F\u4E00\u6B3E\u5F00\u653E\u4E16\u754C\u6E38\u620F\uFF0C\u72EC\u5177\u7279\u8272\u5730\u878D\u5408\u4E86\u7B2C\u4E00\u4EBA\u79F0\u5C04\u51FB\u3001\u751F\u5B58\u6050\u6016\u3001\u5854\u9632\u548C\u89D2\u8272\u626E\u6F14\u7B49\u591A\u79CD\u6E38\u620F\u7684\u7279\u5F81\u3002\u5FEB\u6765\u4F53\u9A8C\u8FD9\u6B3E\u5177\u6709\u5F00\u521B\u6027\u7684\u7EC8\u6781\u4E27\u5C38\u751F\u5B58\u6C99\u76D2\u89D2\u8272\u626E\u6F14\u6E38\u620F\u5427\u3002",
    "features": [
        "steam_disk_space"
    ],
    "images": [
        "registry.cn-shanghai.aliyuncs.com\/pterodactyl-images\/games:source"
    ],
    "file_denylist": [],
    "startup": ".\/7DaysToDieServer.x86_64 -configfile=serverconfig.xml -quit -batchmode -nographics -dedicated -ServerPort=%24{SERVER_PORT} -ServerMaxPlayerCount=%24{MAX_PLAYERS} -GameDifficulty=%24{GAME_DIFFICULTY} -ControlPanelEnabled=false -TelnetEnabled=true -TelnetPort=%24{TELNET_PORT} -TelnetPassword=%24{PASSWORD} -logfile logs\/latest.log %26 echo -e \"Checking on telnet connection\" %26%26 until nc -z -v -w5 127.0.0.1 %24{TELNET_PORT}%3B do echo \"Waiting for telnet connection...\"%3B sleep 5%3B done %26%26 %24( [[ -z %24{PASSWORD} ]] %26%26 printf %s \"telnet -E 127.0.0.1 %24{TELNET_PORT}\" || printf %s \"rcon -t telnet -a 127.0.0.1:%24{TELNET_PORT} -p {{PASSWORD}}\" )",
    "config": {
        "files": "{}",
        "startup": "{\r\n    \"done\": \"Connected with 7DTD server\"\r\n}",
        "logs": "{}",
        "stop": "shutdown"
    },
    "scripts": {
        "installation": {
            "script": "%23!\/bin\/bash\r\n%23 7 days to die Installation Script\r\n%23\r\n%23 Server Files: \/mnt\/server\r\n\r\napt -y --no-install-recommends install curl lib32gcc-s1 ca-certificates\r\n\r\n%23%23 just in case someone removed the defaults.\r\nif [[ \"%24{STEAM_USER}\" == \"\" ]] || [[ \"%24{STEAM_PASS}\" == \"\" ]]%3B then\r\n    echo -e \"steam user is not set.\\n\"\r\n    echo -e \"Using anonymous user.\\n\"\r\n    STEAM_USER=anonymous\r\n    STEAM_PASS=\"\"\r\n    STEAM_AUTH=\"\"\r\nelse\r\n    echo -e \"user set to %24{STEAM_USER}\"\r\nfi\r\n\r\n%23%23 download and install steamcmd\r\ncd \/tmp\r\nmkdir -p \/mnt\/server\/steamcmd\r\ncurl -sSL -o steamcmd.tar.gz https:\/\/steamcdn-a.akamaihd.net\/client\/installer\/steamcmd_linux.tar.gz\r\ntar -xzvf steamcmd.tar.gz -C \/mnt\/server\/steamcmd\r\nmkdir -p \/mnt\/server\/steamapps %23 Fix steamcmd disk write error when this folder is missing\r\ncd \/mnt\/server\/steamcmd\r\n\r\n%23 SteamCMD fails otherwise for some reason, even running as root.\r\n%23 This is changed at the end of the install process anyways.\r\nchown -R root:root \/mnt\r\nexport HOME=\/mnt\/server\r\n\r\n%23%23 install game using steamcmd\r\n.\/steamcmd.sh +force_install_dir \/mnt\/server +login %24{STEAM_USER} %24{STEAM_PASS} %24{STEAM_AUTH} %24( [[ \"%24{WINDOWS_INSTALL}\" == \"1\" ]] %26%26 printf %s '+@sSteamCmdForcePlatformType windows' ) +app_update %24{SRCDS_APPID} %24( [[ -z %24{SRCDS_BETAID} ]] || printf %s \"-beta %24{SRCDS_BETAID}\" ) %24( [[ -z %24{SRCDS_BETAPASS} ]] || printf %s \"-betapassword %24{SRCDS_BETAPASS}\" ) %24{INSTALL_FLAGS} validate +quit \r\n\r\n%23%23 set up 32 bit libraries\r\nmkdir -p \/mnt\/server\/.steam\/sdk32\r\ncp -v linux32\/steamclient.so ..\/.steam\/sdk32\/steamclient.so\r\n\r\n%23%23 set up 64 bit libraries\r\nmkdir -p \/mnt\/server\/.steam\/sdk64\r\ncp -v linux64\/steamclient.so ..\/.steam\/sdk64\/steamclient.so",
            "container": "registry.cn-shanghai.aliyuncs.com\/pterodactyl-images\/installers:debian",
            "entrypoint": "bash"
        }
    },
    "variables": [
        {
            "name": "\u6700\u5927\u73A9\u5BB6\u6570",
            "description": "\u670D\u52A1\u5668\u6700\u5927\u80FD\u5BB9\u7EB3\u7684\u73A9\u5BB6\u6570",
            "env_variable": "MAX_PLAYERS",
            "default_value": "8",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|max:20"
        },
        {
            "name": "\u6E38\u620F\u96BE\u5EA6",
            "description": "0 - 5\uFF0C0=\u6700\u7B80\u5355\uFF0C5=\u6700\u96BE",
            "env_variable": "GAME_DIFFICULTY",
            "default_value": "2",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|in:0,1,2,3,4,5"
        },
        {
            "name": "App ID",
            "description": "\u8FD9\u662F7 Days To Die\u7684\u5E94\u7528\u7A0B\u5E8FID\uFF0C\u8BF7\u52FF\u4FEE\u6539\u3002",
            "env_variable": "SRCDS_APPID",
            "default_value": "294420",
            "user_viewable": false,
            "user_editable": false,
            "rules": "required|string|max:20"
        },
        {
            "name": "\u81EA\u52A8\u66F4\u65B0",
            "description": "\u8FD9\u662F\u4E3A\u4E86\u5728\u542F\u52A8\u65F6\u81EA\u52A8\u66F4\u65B0\u670D\u52A1\u5668\u3002",
            "env_variable": "AUTO_UPDATE",
            "default_value": "1",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|boolean"
        },
        {
            "name": "ld lib path",
            "description": "\u73AF\u5883\u53D8\u91CF",
            "env_variable": "LD_LIBRARY_PATH",
            "default_value": ".",
            "user_viewable": false,
            "user_editable": false,
            "rules": "required|string|max:20"
        },
        {
            "name": "\u6D4B\u8BD5\u670D",
            "description": "\u5B89\u88C5\u6D4B\u8BD5\u670D\uFF08\u5982\u679C\u5DF2\u6307\u5B9A\uFF09\u3002\u4F8B\u5982\uFF1Alatest_experimental\u5C06\u5B89\u88C5\u6700\u65B0\u7684\u6D4B\u8BD5\u670D\u7248\u672C\u3002\u9700\u8981\u91CD\u65B0\u5B89\u88C5\u624D\u80FD\u6B63\u786E\u5207\u6362\u3002",
            "env_variable": "SRCDS_BETAID",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|string|max:20"
        },
        {
            "name": "Telnet\u5BC6\u7801",
            "description": "\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CTelnet\u5728\u672C\u5730\u63A5\u53E3\u4E0A\u8FDB\u884C\u4FA6\u542C\uFF0C\u800C\u4E0D\u4F7F\u7528\u5BC6\u7801\u3002\u4F46\u662F\u5982\u679C\u60A8\u5E0C\u671B\u516C\u5F00telnet\uFF0C\u5219\u53EF\u4EE5\u6307\u5B9A\u5BC6\u7801\u3002",
            "env_variable": "PASSWORD",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|string|max:30"
        },
        {
            "name": "Telnet\u7AEF\u53E3",
            "description": "",
            "env_variable": "TELNET_PORT",
            "default_value": "8081",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|max:20"
        }
    ]
}
